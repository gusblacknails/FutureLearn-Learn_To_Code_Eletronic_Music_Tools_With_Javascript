<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Chapter 1.19 - Fidling with the filter</title>
	<script type="text/javascript" src="../../index.js"></script>
	<link rel="stylesheet" href="../../syntax.css">
</head>
<style>

</style>
<body>

<h2>Chapter 1.19 - Fidling with the filter</h2>
<h3>In this lesson you learnt how to use filters to create new types of sound.</h3>

<div tabindex="1" style="border:1px solid red;width:200px;width: 100%;line-height: 300px;margin-bottom: 40px;text-align: center;" onmousemove="changeFilter(event.clientX, event.clientY)" onkeydown="setNote(event.key)">
	<p style="color:white">Click here and press a key</p>
</div>

<div class="code">
<span class="file">script</span>
<pre class="js">
</pre>
</div>

<div class="code">
<span class="file">html</span>
<p><span class="tag">&lt;div</span> <span class="attr">tabindex="1" style="border:1px solid red;width:200px;width: 100%;line-height: 300px;margin-bottom: 40px;text-align: center;" onmousemove="changeFilter(event.clientX, event.clientY)" onkeydown="setNote(event.key)"</span><span class="tag">&gt;</span></p>
	<p>&emsp;&emsp;&emsp;<span class="tag">&lt;p</span> <span class="attr">style="color:white"</span><span class="tag">&gt;</span></span>Click here and press a key<span class="tag">&lt;/p&gt;</span></p>
<p><span class="tag">&lt;/div&gt;</span></p>
</div>
	<script id="js">	
var audio_context = window.AudioContext || window.webkitAudioContext; // Makes the synthsizer cross browser compatible

var con = new audio_context(); // Create an audio engine
var osc = con.createOscillator(); //Creating an Oscilattor
var filter = con.createBiquadFilter(); //Creating a filter

filter.frequency.value = 200;
osc.frequency.value = 600; 
osc.start(); //starts the oscillator
osc.type = "sawtooth"; //Sets the wave type
osc.connect(filter); //Connects the oscillator to the computer sound system
filter.connect(con.destination);

function setNote(key){
	if(key == 'z'){
		//Play a C
		osc.frequency.value = 261.33;
	}

	if(key == 'x'){
		//Play a D
		osc.frequency.value = 293.66;
	}
	
	if(key == 'c'){
		//Play a E
		osc.frequency.value = 329.63;
	}

	if(key == 'v'){
		//Play a F
		osc.frequency.value = 349.23;
	}
}

function changeFilter(mx, my){
	filter.frequency.value = mx*10;
	filter.Q.value = my / 10; 
}
</script>
</body>
</html>
