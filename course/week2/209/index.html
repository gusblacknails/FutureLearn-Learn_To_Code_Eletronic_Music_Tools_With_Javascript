<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Chapter 2.08 - Piano Controller</title><
	<link rel="stylesheet" href="../../syntax.css">
	<script type="text/javascript" src="nexusUI.min.js"></script>
		<script type="text/javascript" src="../../index.js"></script>


</head>

<body>

<h2>Chapter 2.08 - Piano Controller</h2>
<h3>In this chapter you learn to connect the nexusUI widgets with the WebAudio API</h3>
<br>
<canvas nx="keyboard" id="keyboard"></canvas>


<br>
<div class="code">
	<span class="file">script</span>
	<pre class="js">
	</pre>
</div>
<div class="code">
<span class="file">html</span>
<pre class="js">
</pre>
&lt;canvas nx="keyboard" id="keyboard"&gt;&lt;/canvas><br>
</div>
</body>
<script id="js" type="text/javascript">
var audio_context = window.AudioContext || window.webkitAudioContext

var con = new audio_context();
var osc = con.createOscillator();
osc.connect(con.destination);
osc.start();
var slider1, keyboard;

nx.onload = function(){
	keyboard.on('*', keyboardChanged)

}

var midi_to_freq = {
  60:261.63, 
  61:277.18, 
  62:293.66, 
  63:311.13, 
  64:329.63, 
  65:349.23, 
  66:369.99, 
  67:392.00,	
  68:415.30, 
};


function keyboardChanged(data){
	osc.frequency.value = midi_to_freq[data.note]
}


</script>
</html>